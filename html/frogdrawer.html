<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Frog Drawer</title>
		<meta name="description" content="Frog drawing tool.">
		<meta name="keywords" content="Frog, CSIT128">
		<meta property="og:title" content="Frog Drawer">
		<meta property="og:type" content="website">
		<meta property="og:url" content="https://mysterypancake.github.io/Fun/html/frogdrawer">
		<meta property="og:site_name" content="Frog Drawer">
		<meta property="og:description" content="Frog drawing tool.">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style>
		* {
			font-family: Verdana, Geneva, sans-serif;
		}

		canvas {
			border: 1px solid black;
		}
		</style>
		<script>
		let points = [];
		let redo = [];
		let canvas;
		let context;
		let triangleColor = "#008000";
		let backgroundColor = "#FFFFFF";
		let clicking = false;
		let currentPoint;

		function setup() {
			canvas = document.getElementById("canvasElem");
			context = canvas.getContext("2d");
			context.lineWidth = 4;
			canvas.addEventListener("mousedown", function(e) {
				currentPoint = { x: e.offsetX, y: e.offsetY, color: triangleColor };
				points.push(currentPoint);
				redo = [];
				redraw();
				clicking = true;
			});
			canvas.addEventListener("mouseup", function(e) {
				clicking = false;
			});
			canvas.addEventListener("mousemove", function(e) {
				if (clicking && currentPoint) {
					currentPoint.x = e.offsetX;
					currentPoint.y = e.offsetY;
					redraw();
				}
			});
		}

		function redraw() {
			context.fillStyle = backgroundColor;
			context.fillRect(0, 0, canvas.width, canvas.height);
			for (let i = 0; i < points.length; i += 3) {
				const currentPoint = points[i];
				context.fillStyle = currentPoint.color;
				context.beginPath();
				context.moveTo(currentPoint.x, currentPoint.y);
				const nextPoint = points[i + 1];
				if (nextPoint) {
					context.fillStyle = nextPoint.color;
					context.lineTo(nextPoint.x, nextPoint.y);
					const nextPoint2 = points[i + 2];
					if (nextPoint2) {
						context.fillStyle = nextPoint2.color;
						context.lineTo(nextPoint2.x, nextPoint2.y);
					}
				} else {
					context.lineTo(currentPoint.x, currentPoint.y + 2);
				}
				context.closePath();
				context.stroke();
				context.fill();
			}
		}

		function undoPoint() {
			const point = points.pop();
			if (point) {
				redo.push(point);
			}
			redraw();
		}

		function redoPoint() {
			const point = redo.pop();
			if (point) {
				points.push(point);
			}
			redraw();
		}

		function updateTriangleColor(elem) {
			triangleColor = elem.value;
			if (currentPoint) {
				currentPoint.color = triangleColor;
			}
			redraw();
		}

		function updateBackgroundColor(elem) {
			backgroundColor = elem.value;
			redraw();
		}
		</script>
	</head>
	<body onload="setup();">
		<h1>Frog Drawer</h1>
		<canvas id="canvasElem" width="512" height="256"></canvas>
		<div>
			<button onclick="undoPoint();">Undo point</button>
			<button onclick="redoPoint();">Redo point</button>
			<label for="triangleColorElem">Triangle color:</label>
			<input id="triangleColorElem" type="color" value="#008000" oninput="updateTriangleColor(this);">
			<label for="backgroundColorElem">Background color:</label>
			<input id="backgroundColorElem" type="color" value="#FFFFFF" oninput="updateBackgroundColor(this);">
		</div>
	</body>
</html>